<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="KR-PH Îã¨Î†•">
    <title>2026 ÌïúÍµ≠-ÌïÑÎ¶¨ÌïÄ Í≥µÌú¥Ïùº Îã¨Î†•</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const koreanHolidays = { '2026-01-01': 'Ïã†Ï†ï', '2026-01-17': 'OFF ÌÜ†ÏöîÏùº',  '2026-01-31': 'OFF ÌÜ†ÏöîÏùº', '2026-02-14': 'OFF ÌÜ†ÏöîÏùº', '2026-02-16': 'ÏÑ§ÎÇ† Ï†ÑÎÇ†', '2026-02-17': 'ÏÑ§ÎÇ†', '2026-02-18': 'ÏÑ§ÎÇ† Îã§ÏùåÎÇ†', '2026-02-28': 'OFF ÌÜ†ÏöîÏùº', '2026-03-01': 'ÏÇºÏùºÏ†à', '2026-03-02': 'ÏÇºÏùºÏ†à ÎåÄÏ≤¥Í≥µÌú¥Ïùº', '2026-03-14': 'OFF ÌÜ†ÏöîÏùº', '2026-03-28': 'OFF ÌÜ†ÏöîÏùº', '2026-04-11': 'OFF ÌÜ†ÏöîÏùº', '2026-04-25': 'OFF ÌÜ†ÏöîÏùº', '2026-05-05': 'Ïñ¥Î¶∞Ïù¥ÎÇ†', '2026-05-09': 'OFF ÌÜ†ÏöîÏùº', '2026-05-23': 'OFF ÌÜ†ÏöîÏùº', '2026-05-24': 'ÏÑùÍ∞ÄÌÉÑÏã†Ïùº', '2026-05-26': 'ÏÑùÍ∞ÄÌÉÑÏã†Ïùº ÎåÄÏ≤¥Í≥µÌú¥Ïùº', '2026-06-06': 'ÌòÑÏ∂©Ïùº', '2026-06-20': 'OFF ÌÜ†ÏöîÏùº', '2026-07-04': 'OFF ÌÜ†ÏöîÏùº', '2026-07-17': 'Ï†úÌóåÏ†à', '2026-07-18': 'OFF ÌÜ†ÏöîÏùº', '2026-08-01': 'OFF ÌÜ†ÏöîÏùº', '2026-08-15': 'Í¥ëÎ≥µÏ†à', '2026-08-29': 'OFF ÌÜ†ÏöîÏùº', '2026-09-12': 'OFF ÌÜ†ÏöîÏùº', '2026-09-24': 'Ï∂îÏÑù Ï†ÑÎÇ†', '2026-09-25': 'Ï∂îÏÑù', '2026-09-26': 'Ï∂îÏÑù Îã§ÏùåÎÇ†', '2026-10-03': 'Í∞úÏ≤úÏ†à', '2026-10-06': 'Í∞úÏ≤úÏ†à ÎåÄÏ≤¥Í≥µÌú¥Ïùº', '2026-10-09': 'ÌïúÍ∏ÄÎÇ†', '2026-10-10': 'OFF ÌÜ†ÏöîÏùº', '2026-10-24': 'OFF ÌÜ†ÏöîÏùº', '2026-11-07': 'OFF ÌÜ†ÏöîÏùº', '2026-11-21': 'OFF ÌÜ†ÏöîÏùº', '2026-12-05': 'OFF ÌÜ†ÏöîÏùº', '2026-12-19': 'OFF ÌÜ†ÏöîÏùº', '2026-12-25': 'ÌÅ¨Î¶¨Ïä§ÎßàÏä§' };
        const philippineHolidays = { '2026-01-01': "New Year's Day", '2026-02-17': 'Chinese New Year','2026-03-20': 'Eid al-Fitr', '2026-04-02': 'Maundy Thursday', '2026-04-03': 'Good Friday', '2026-04-04': 'Black Saturday', '2026-04-09': 'Araw ng Kagitingan', '2026-05-01': 'Labor Day', '2026-05-27': 'Eid al-Adha','2026-06-12': 'Independence Day', '2026-08-21': 'Ninoy Aquino Day', '2026-08-31': "National Heroes' Day", '2026-11-01': "All Saints' Day", '2026-11-02': "All Souls' Day", '2026-11-30': 'Bonifacio Day', '2026-12-08': 'Immaculate Conception', '2026-12-24': 'Christmas Eve', '2026-12-25': 'Christmas Day', '2026-12-30': 'Rizal Day', '2026-12-31': 'Last Day of the Year' };

        const holidayUrlMap = {
            // Korea
            'ÏÇºÏùºÏ†à': '3¬∑1Ï†à',
            'ÏÑùÍ∞ÄÌÉÑÏã†Ïùº': 'Î∂ÄÏ≤òÎãò_Ïò§Ïã†_ÎÇ†',
            'ÌÅ¨Î¶¨Ïä§ÎßàÏä§': 'ÏÑ±ÌÉÑÏ†à',
            // Philippines
            'Independence Day': 'Independence_Day_(Philippines)',
            'Ninoy Aquino Day': 'Ninoy_Aquino_Day',
            "National Heroes' Day": "National_Heroes'_Day",
            "Last Day of the Year": "New_Year's_Eve",
        };

        const HolidayLink = ({ name, country }) => {
            const baseUrl = country === 'KR'
                ? 'https://ko.wikipedia.org/wiki/'
                : 'https://en.wikipedia.org/wiki/';

            if (name.includes('OFF ÌÜ†ÏöîÏùº') || name.includes('Ï†ÑÎÇ†') || name.includes('Îã§ÏùåÎÇ†')) return <span>{name}</span>;

            const urlKey = holidayUrlMap[name] || name.replace(/ /g, '_');

            return (
                <a
                    href={`${baseUrl}${urlKey}`}
                    target="_blank"
                    rel="noreferrer"
                    className="hover:underline hover:text-red-800 cursor-pointer"
                    onClick={(e) => e.stopPropagation()}
                    title="ÏúÑÌÇ§Î∞±Í≥º ÏÑ§Î™Ö Î≥¥Í∏∞"
                >
                    {name}
                </a>
            );
        };

        const App = () => {
            const [month, setMonth] = useState(new Date().getMonth());
            const [todos, setTodos] = useState({});
            const [modal, setModal] = useState(null);
            const [input, setInput] = useState('');
            const [attachment, setAttachment] = useState(null);
            const [editingId, setEditingId] = useState(null);
            const [editText, setEditText] = useState('');

            useEffect(() => {
                const saved = localStorage.getItem('todos');
                if (saved) setTodos(JSON.parse(saved));
            }, []);

            useEffect(() => {
                localStorage.setItem('todos', JSON.stringify(todos));
            }, [todos]);

            const fmt = (y, m, d) => `${y}-${String(m + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
            const days = (m) => new Date(2026, m + 1, 0).getDate();
            const first = (m) => new Date(2026, m, 1).getDay();

            const monthHolidays = () => {
                const h = [];
                for (let d = 1; d <= days(month); d++) {
                    const date = fmt(2026, month, d);
                    if (koreanHolidays[date] || philippineHolidays[date]) {
                        h.push({ date, day: d, kr: koreanHolidays[date], ph: philippineHolidays[date] });
                    }
                }
                return h;
            };

            const monthTodos = () => {
                const t = {};
                for (let d = 1; d <= days(month); d++) {
                    const date = fmt(2026, month, d);
                    if (todos[date]?.length) t[date] = todos[date];
                }
                return t;
            };

            const handleFileChange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 2 * 1024 * 1024) {
                        alert('ÏÇ¨ÏßÑ Ïö©ÎüâÏù¥ ÎÑàÎ¨¥ ÌÅΩÎãàÎã§. (2MB Ïù¥Ìïò Í∂åÏû•)');
                        return;
                    }
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setAttachment(reader.result);
                    };
                    reader.readAsDataURL(file);
                }
            };

            const add = () => {
                if (!input.trim() && !attachment) return;
                setTodos(prev => ({
                    ...prev, [modal]: [...(prev[modal] || []), {
                        id: Date.now(),
                        text: input,
                        done: false,
                        image: attachment
                    }]
                }));
                setInput('');
                setAttachment(null);
            };

            const toggle = (date, id) => {
                setTodos(prev => ({ ...prev, [date]: prev[date].map(t => t.id === id ? { ...t, done: !t.done } : t) }));
            };

            const del = (date, id) => {
                setTodos(prev => {
                    const updated = { ...prev, [date]: prev[date].filter(t => t.id !== id) };
                    if (!updated[date].length) delete updated[date];
                    return updated;
                });
            };

            const startEdit = (date, todo) => {
                setEditingId(todo.id);
                setEditText(todo.text);
            };

            const saveEdit = (date, id) => {
                if (!editText.trim()) {
                    setEditingId(null);
                    return;
                }
                setTodos(prev => ({
                    ...prev,
                    [date]: prev[date].map(t => t.id === id ? { ...t, text: editText } : t)
                }));
                setEditingId(null);
                setEditText('');
            };

            const cancelEdit = () => {
                setEditingId(null);
                setEditText('');
            };

            const renderCal = () => {
                const cells = [];
                for (let i = 0; i < first(month); i++) cells.push(<div key={`e${i}`} />);
                for (let d = 1; d <= days(month); d++) {
                    const date = fmt(2026, month, d);
                    const dow = new Date(2026, month, d).getDay();
                    const kr = koreanHolidays[date];
                    const ph = philippineHolidays[date];
                    const red = dow === 0 || kr || ph;
                    const today = new Date().toDateString() === new Date(2026, month, d).toDateString();
                    const dayTodos = todos[date] || [];
                    const total = dayTodos.length;
                    const pending = dayTodos.filter(t => !t.done).length;
                    cells.push(
                        <div key={d} onClick={() => setModal(date)} className={`relative min-h-20 p-2 border border-gray-200 cursor-pointer hover:bg-gray-50 ${today ? 'bg-blue-50' : ''}`}>
                            <div className={`text-sm font-medium ${red ? 'text-red-600' : ''}`}>{d}</div>
                            {kr && <div className="text-xs text-red-600 hidden sm:block truncate"><HolidayLink name={kr} country="KR" /></div>}
                            {ph && <div className="text-xs text-red-600 hidden sm:block truncate"><HolidayLink name={ph} country="PH" /></div>}
                            {total > 0 && (
                                <div className="absolute bottom-1 right-1 bg-blue-500 text-white text-[10px] px-1 rounded shadow-sm pointer-events-none">
                                    {pending}/{total}
                                </div>
                            )}
                        </div>
                    );
                }
                return cells;
            };

            const TodoItem = ({ date, todo, inModal = false }) => {
                const isEditing = editingId === todo.id;
                
                return (
                    <div className="flex gap-2 p-2 bg-gray-50 rounded mb-2">
                        <div onClick={() => !isEditing && toggle(date, todo.id)} className={`w-5 h-5 mt-0.5 border-2 rounded ${isEditing ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'} flex-shrink-0 flex items-center justify-center ${todo.done ? 'bg-blue-500 border-blue-500' : 'border-gray-300'}`}>
                            {todo.done && <svg className="w-3 h-3 text-white" fill="none" stroke="currentColor" strokeWidth="3" viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12" /></svg>}
                        </div>
                        <div className="flex-1 min-w-0">
                            {isEditing ? (
                                <div className="space-y-2">
                                    <input
                                        value={editText}
                                        onChange={(e) => setEditText(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && saveEdit(date, todo.id)}
                                        className="w-full px-2 py-1 border rounded text-sm"
                                        autoFocus
                                    />
                                    <div className="flex gap-2">
                                        <button onClick={() => saveEdit(date, todo.id)} className="px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600">Ï†ÄÏû•</button>
                                        <button onClick={cancelEdit} className="px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400">Ï∑®ÏÜå</button>
                                    </div>
                                </div>
                            ) : (
                                <>
                                    <div className={`text-sm break-words ${todo.done ? 'line-through text-gray-400' : ''}`}>{todo.text}</div>
                                    {todo.image && <img src={todo.image} alt="attached" className="mt-2 h-20 w-auto rounded object-cover border" />}
                                </>
                            )}
                        </div>
                        {!isEditing && (
                            <div className="flex flex-col gap-1">
                                <button onClick={() => startEdit(date, todo)} className="text-blue-500 hover:bg-blue-50 px-1 rounded text-sm self-start" title="ÏàòÏ†ï">‚úé</button>
                                <button onClick={() => del(date, todo.id)} className="text-red-500 hover:bg-red-50 px-1 rounded self-start" title="ÏÇ≠Ï†ú">√ó</button>
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="max-w-7xl mx-auto p-4">
                    <div className="flex justify-between items-center mb-4">
                        <button onClick={() => setMonth(m => m > 0 ? m - 1 : 11)} className="p-2 hover:bg-gray-100 rounded">‚Üê</button>
                        <h1 className="text-2xl font-bold">2026ÎÖÑ {month + 1}Ïõî</h1>
                        <button onClick={() => setMonth(m => m < 11 ? m + 1 : 0)} className="p-2 hover:bg-gray-100 rounded">‚Üí</button>
                    </div>
                    <div className="grid lg:grid-cols-[1fr_350px] gap-4">
                        <div className="border rounded-lg overflow-hidden">
                            <div className="grid grid-cols-7 bg-gray-100 border-b">
                                {['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'].map((d, i) => <div key={d} className={`p-2 text-center text-sm font-medium ${i === 0 ? 'text-red-600' : ''}`}>{d}</div>)}
                            </div>
                            <div className="grid grid-cols-7">{renderCal()}</div>
                        </div>
                        <div className="space-y-4">
                            <div className="border rounded-lg">
                                <div className="p-3 bg-gray-50 border-b font-medium">Ïù¥Î≤à Îã¨ Í≥µÌú¥Ïùº</div>
                                <div className="p-3 max-h-96 overflow-y-auto">
                                    {monthHolidays().length === 0 ? <p className="text-center text-gray-400 py-8">Í≥µÌú¥Ïùº ÏóÜÏùå</p> : monthHolidays().map(h => (
                                        <div key={h.date} className="flex gap-3 py-2 border-b last:border-0">
                                            <div className="text-2xl text-red-600 w-10 text-center">{h.day}</div>
                                            <div className="flex-1">
                                                {h.kr && <div className="text-sm">üá∞üá∑ <HolidayLink name={h.kr} country="KR" /></div>}
                                                {h.ph && <div className="text-sm">üáµüá≠ <HolidayLink name={h.ph} country="PH" /></div>}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            <div className="border rounded-lg">
                                <div className="p-3 bg-gray-50 border-b font-medium">Ïù¥Î≤à Îã¨ Ìï† Ïùº</div>
                                <div className="p-3 max-h-96 overflow-y-auto">
                                    {Object.keys(monthTodos()).length === 0 ? <p className="text-center text-gray-400 py-8">Ìï† Ïùº ÏóÜÏùå</p> : Object.keys(monthTodos()).sort().map(date => (
                                        <div key={date} className="mb-4">
                                            <div className="font-medium text-sm mb-2 pb-1 border-b-2 border-blue-500">{date.split('-')[1]}Ïõî {date.split('-')[2]}Ïùº</div>
                                            {todos[date].map(t => <TodoItem key={t.id} date={date} todo={t} />)}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                    {modal && (
                        <div onClick={(e) => e.target === e.currentTarget && setModal(null)} className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                            <div className="bg-white rounded-lg max-w-md w-full p-6">
                                <div className="flex justify-between mb-4">
                                    <h2 className="text-lg font-bold">{modal} Ìï† Ïùº</h2>
                                    <button onClick={() => setModal(null)} className="text-2xl">√ó</button>
                                </div>
                                {(koreanHolidays[modal] || philippineHolidays[modal]) && (
                                    <div className="text-sm text-red-600 mb-4 bg-red-50 p-2 rounded">
                                        {koreanHolidays[modal] && <div>üá∞üá∑ <HolidayLink name={koreanHolidays[modal]} country="KR" /></div>}
                                        {philippineHolidays[modal] && <div>üáµüá≠ <HolidayLink name={philippineHolidays[modal]} country="PH" /></div>}
                                    </div>
                                )}
                                <div className="flex flex-col gap-3 mb-4">
                                    <div className="flex gap-2">
                                        <input value={input} onChange={e => setInput(e.target.value)} onKeyPress={e => e.key === 'Enter' && add()} placeholder="Ìï† Ïùº ÏûÖÎ†•" className="flex-1 px-3 py-2 border rounded" />
                                        <button onClick={add} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Ï∂îÍ∞Ä</button>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <label className="cursor-pointer flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded text-sm text-gray-700">
                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                                            ÏÇ¨ÏßÑ Ï∂îÍ∞Ä
                                            <input type="file" accept="image/*" onChange={handleFileChange} className="hidden" />
                                        </label>
                                        {attachment && (
                                            <div className="flex items-center gap-2 bg-blue-50 px-2 py-1 rounded">
                                                <span className="text-xs text-blue-600">ÏÇ¨ÏßÑ ÏÑ†ÌÉùÎê®</span>
                                                <button onClick={() => setAttachment(null)} className="text-red-500 hover:text-red-700">√ó</button>
                                            </div>
                                        )}
                                    </div>
                                    {attachment && (
                                        <div className="w-full h-32 bg-gray-100 rounded overflow-hidden flex items-center justify-center border">
                                            <img src={attachment} className="h-full object-contain" />
                                        </div>
                                    )}
                                </div>
                                <div className="space-y-2 max-h-80 overflow-y-auto">
                                    {(todos[modal] || []).length === 0 ? <p className="text-center text-gray-400 py-8">Ìï† Ïùº ÏóÜÏùå</p> : (todos[modal] || []).map(t => (
                                        <TodoItem key={t.id} date={modal} todo={t} inModal={true} />
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>
